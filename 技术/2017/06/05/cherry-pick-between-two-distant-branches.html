<!DOCTYPE html> <html class='borderbox'> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>é¥è¿œåˆ†æ”¯çš„æ‰‹åŠ¨ cherry-pick æ–¹æ³•</title> <meta name="description" content="è¿™æ˜¯æˆ‘çš„ä¸­æ–‡åšå®¢ï¼Œè®°å½•è‡ªå·±åœ¨æŠ€æœ¯ã€ç”Ÿæ´»ç­‰æ–¹é¢çš„ä¸€äº›æ„Ÿæƒ³ã€‚åšå®¢å« Storm Spiritï¼Œ å› ä¸ºæˆ‘ç‰¹åˆ«å–œæ¬¢ Dota é‡Œè“çŒ«è¿™ä¸ªè‹±é›„ï¼Œå¯æƒœç©å¾—ä¸å¥½â€¦â€¦ å¸Œæœ›è‡ªå·±èƒ½å¤Ÿé€šè¿‡åšå®¢ï¼Œå¾—åˆ°æˆé•¿ã€‚ "> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://wwulfric.github.io/%E6%8A%80%E6%9C%AF/2017/06/05/cherry-pick-between-two-distant-branches.html"> <script src="/js/jquery-2.1.1.min.js"></script> <script src="/js/jquery.modal.min.js"></script> <script src="/js/main.js"></script> </head> <body> <div class='content'> <header> <a class="site-title" href="/">Storm Spirit</a> </header> <div class="post typo"> <header class="post-header clearfix"> <div class='date pull-left clearfix'> <div class='day-month pull-left'> <div class='day'>05</div> <div class='month'>JUN</div> </div> <div class='year pull-left'>2017</div> </div> <h1 class="post-title">é¥è¿œåˆ†æ”¯çš„æ‰‹åŠ¨ cherry-pick æ–¹æ³•</h1> </header> <blockquote id='by-nc-nd'> å£°æ˜: æœ¬æ–‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh_TW" rel="nofollow" target="_blank" title="å§“åæ ‡ç¤º-éå•†ä¸šæ€§-ç¦æ­¢æ”¹ä½œ4.0å›½é™…">CC BY-NC-ND 4.0</a> æˆæƒã€‚ </blockquote> <article class="post-content"> <p>åœ¨åˆšå¼€å§‹ä½¿ç”¨ git ä½œä¸ºä»£ç æ‰˜ç®¡å·¥å…·çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯ä¸€åå­¦ç”Ÿï¼Œè‡ªå·±çš„é¡¹ç›®ä¹Ÿæ²¡å•¥å†²çªå¥½è§£å†³çš„ï¼Œé‚£ä¸ªæ—¶å€™çš„ git æ„Ÿè§‰å°±æ˜¯ä¸€ä¸ªç”¨èµ·æ¥è¿˜ç®—æ–¹ä¾¿çš„è½»é‡çº§ä»£ç åŒæ­¥å·¥å…·ã€‚ä¹‹æ‰€ä»¥è¯´å®ƒè½»é‡ï¼Œæ˜¯å› ä¸ºå½¼æ—¶æ‰€éœ€è¦çš„æ‰€æœ‰å‘½ä»¤åªæœ‰ 4 ä¸ªï¼š</p> <div class="highlight"><pre><code class="language-shell">git pull <span class="c1"># æ¢ç”µè„‘çš„æ—¶å€™åŒæ­¥ä»£ç </span>

git add
git commit
git push <span class="c1"># æ¨é€ä»£ç </span></code></pre></div> <p>å½“æ—¶è¿˜è§‰å¾—æäº¤ä»£ç éœ€è¦ add+commit+pushï¼Œå¾ˆæ˜¯éº»çƒ¦ã€‚å·¥ä½œä¹‹åç»å†äº†å›¢é˜Ÿå¼€å‘ï¼Œå¤šè¿›åº¦å¼€å‘ï¼ŒåºŸå¼ƒï¼Œæå‰ä¸Šçº¿ç­‰ç­‰æƒ…å†µä¹‹åï¼Œæ‰è¶Šæ¥è¶Šæ„Ÿå—åˆ° git æ‰€è°“ã€Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€çš„å¨åŠ›ã€‚</p> <p>ç„¶è€Œéšç€ä½¿ç”¨çš„æ›´åŠ é¢‘ç¹ï¼Œæ¸æ¸çš„æ„Ÿè§‰åˆ° git ä¹Ÿæœ‰ä¸€äº›ä¸é‚£ä¹ˆå¦‚äººæ„çš„åœ°æ–¹ï¼Œæ¯”å¦‚æ—¶é—´ä¹…çš„å¤§é¡¹ç›®ï¼Œå ç”¨ç©ºé—´å¤§ï¼Œä¸å°å¿ƒ commit è¿›å»äº†å¤§æ–‡ä»¶ï¼Œå°±å†ä¹Ÿæ‹¿ä¸å‡ºæ¥äº†ï¼›checkout åˆ†æ”¯çš„åŠ¨ä½œè¶Šæ¥è¶Šé‡ç­‰ã€‚</p> <p>è¿™æ¬¡é‡åˆ°çš„å°±æ˜¯ä¸€ä¸ªè¾ƒä¸ºæ£˜æ‰‹çš„åˆå¹¶é—®é¢˜ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“å¼€å‘ä¸€ä¸ªfeature åˆ†æ”¯çš„æ—¶å€™ï¼Œçªç„¶æœ‰éœ€æ±‚è¦å°†è¯¥ feature åˆ†æ”¯çš„ B commit æ”¾åˆ° master åˆ†æ”¯ä¸Šã€‚è€Œæ­¤æ—¶ï¼Œç”±äºç–å¿½ï¼Œfeature åˆ†æ”¯å·²ç»è¿œè¿œè½åäº master åˆ†æ”¯äº†ï¼Œä¸”è¯¥åˆ†æ”¯ä¹Ÿæäº¤äº†å¤§é‡çš„ commitï¼Œå¯æƒ³è€ŒçŸ¥åˆå¹¶å°†äº§ç”Ÿå¤§é‡çš„å†²çªã€‚ï¼ˆå½“ç„¶ï¼Œfeature åˆ†æ”¯åº”è¯¥å°½é‡é¢‘ç¹çš„ rebase masterï¼‰</p> <p><figure> <a class='post-image' rel='post-image' href='http://wulfric.qiniudn.com/git/R-far-away-branch.png'> <img src="http://wulfric.qiniudn.com/git/R-far-away-branch.png" alt="ä¸¤ä¸ªåˆ†é“æ‰¬é•³çš„åˆ†æ”¯ä¹‹é—´çš„ cherry pick æ‰‹åŠ¨ git ä¿®å¤" title="ä¸¤ä¸ªåˆ†é“æ‰¬é•³çš„åˆ†æ”¯ä¹‹é—´çš„ cherry pick æ‰‹åŠ¨ git ä¿®å¤" /> </a> <figcaption>ä¸¤ä¸ªåˆ†é“æ‰¬é•³çš„åˆ†æ”¯ä¹‹é—´çš„ cherry pick æ‰‹åŠ¨ git ä¿®å¤</figcaption> </figure></p> <p>é¢å¯¹è¿™ç§å†²çªä¸€ç‚¹åŠæ³•éƒ½æ²¡æœ‰ï¼Œå¦‚æœç›´æ¥ cherry pickï¼Œå¤§é‡çš„éš¾ä»¥ç†è§£çš„å†²çªå°†ä»¤äººæ— æ‰€æ˜¯ä»ï¼Œè§£å†³è¿™äº›å†²çªä¹Ÿä¼šæ¶ˆè€—å¤§é‡çš„ç²¾åŠ›ï¼Œå³ä½¿æœ‰äº›æ–‡ä»¶çš„å†²çªä½ å¾ˆæ˜ç™½å¹¶ä¸éœ€è¦ï¼Œåªæ˜¯ä¸¤ä¸ª commit git diff çš„ç»“æœè€Œå·²ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›åŸå§‹çš„æ‰‹æ®µæ‰‹åŠ¨å‡å°‘ä¸€äº›å†²çªå’Œæ‰“ä¸€éƒ¨åˆ†è¡¥ä¸ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æ–¹æ³•ï¼š</p> <ul> <li>æŸ¥çœ‹ä¸¤ä¸ª commit ä¹‹é—´çš„æ–‡ä»¶å˜åŠ¨ï¼Œ æ˜ç¡®éœ€è¦é‚£äº›æ›´æ”¹ï¼ˆè¿™ç§æƒ…å†µä¸‹æ˜¾ç¤ºå˜åŠ¨çš„æ–‡ä»¶å¯èƒ½ä¼šå¾ˆå¤šï¼Œä½†ä¸€èˆ¬ä½ éœ€è¦çš„å¹¶ä¸å¤šï¼Œæ¥ä¸‹æ¥å°±é’ˆå¯¹ä½ éœ€è¦çš„æ–‡ä»¶æŸ¥çœ‹å’Œ patchï¼‰</li> <li>æŸ¥çœ‹æŸä¸ª commit çš„æŸä¸ªæ–‡ä»¶çš„ diff ï¼ˆä¸Šé¢å·²ç»çŸ¥é“éœ€è¦ä¿®æ”¹å“ªäº›æ–‡ä»¶äº†ï¼ŒæŸ¥çœ‹ä¸‹è¯¥æ–‡ä»¶çš„ diffï¼‰</li> <li>æŸ¥çœ‹ä¸¤ä¸ª commit ä¹‹é—´çš„æŸä¸ªæ–‡ä»¶çš„ patchï¼Œå¹¶å°†è¯¥ patch åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ï¼ˆå¦‚æœ diff ç®€å•è€Œæ˜ç¡®ï¼Œå¯ä»¥å°è¯•ç›´æ¥ patch è¿‡æ¥ï¼‰</li> <li>æŸ¥çœ‹æŸä¸ª commit çš„æŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæ‹·è´éœ€è¦çš„éƒ¨åˆ†åˆ°å½“å‰ï¼ˆpatch æœ‰å¯èƒ½ä¼šå¤±è´¥ï¼Œç”¨åŸå§‹çš„æ–¹æ³•æŸ¥çœ‹ï¼Œç„¶åæ‹·è´éœ€è¦çš„éƒ¨åˆ†ï¼‰</li> <li>å¦‚æœç¡®è®¤å½“å‰åˆ†æ”¯å¯ä»¥ä½¿ç”¨å…¶ä»–åˆ†æ”¯çš„æŸä¸ªæ–‡ä»¶çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥ checkout åˆ°è¯¥ commit çš„é‚£ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·å°±ä¸éœ€è¦è´¹åŠ²çš„è§£å†³å†²çªäº†</li> </ul> <p>ä¸‹é¢çš„å‘½ä»¤æ¸…å•è®°å½•äº†è§£å†³å†²çªè¦ç”¨åˆ°çš„ git å‘½ä»¤ã€‚</p> <div class="highlight"><pre><code class="language-shell"><span class="c1"># æŸ¥çœ‹ä¸¤ä¸ª commit ä¹‹é—´å“ªäº›æ–‡ä»¶æœ‰å˜åŠ¨</span>
git diff --name-only SHA1 SHA2
<span class="c1"># http://stackoverflow.com/questions/1552340/how-to-list-the-file-names-only-that-changed-between-two-commits</span>

<span class="c1"># æ˜¾ç¤ºæŸä¸ª commit çš„æŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼šæ‹·è´å†…å®¹</span>
git show SHA1:path/to/file
<span class="c1"># http://stackoverflow.com/questions/338436/is-there-a-quick-git-command-to-see-an-old-version-of-a-file</span>

<span class="c1"># æ˜¾ç¤ºæŸä¸ª commit çš„æŸä¸ªæ–‡ä»¶çš„ diff</span>
git show SHA1 path/to/file

<span class="c1"># æŸ¥çœ‹ä¸¤ä¸ª commit ä¹‹é—´æŸä¸ªæ–‡ä»¶çš„ patch</span>
git diff &lt;SHA1&gt;^..&lt;SHA2&gt; -- &lt;filename&gt;

<span class="c1"># å°†è¯¥ patch å†…å®¹åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ï¼šå› ä¸ºåˆ†æ”¯ä¹‹é—´å·®è·æ¯”è¾ƒå¤§ï¼Œå¾€å¾€å¾ˆéš¾æˆåŠŸ patch</span>
git diff &lt;SHA1&gt;^..&lt;SHA2&gt; -- &lt;filename&gt; <span class="p">|</span> git apply
<span class="c1"># http://stackoverflow.com/questions/16068186/how-to-cherry-pick-only-changes-for-only-one-file-not-the-whole-commit</span>

<span class="c1"># å®Œå…¨ä½¿ç”¨è¿œç¨‹åˆ†æ”¯çš„æ–‡ä»¶ï¼šæ–°æ–‡ä»¶ï¼Œç¡®å®šä½¿ç”¨å¦å¤–ä¸€ä¸ªç‰ˆæœ¬</span>
git checkout feature-branch /path/to/file</code></pre></div> <p>å½“ç„¶ï¼Œè¿˜æ˜¯æ¨èç»å¸¸ rebase master çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨ rebase å’Œ cherry pick ç­‰ã€Œæ­£ç»ã€æ–¹æ³•ğŸ˜€ï¼Œå‚è§<a href="2014/03/git-team-cooperate/">æ­¤æ–‡</a>ã€‚</p> </article> <div id='additional' class='clearfix'> <div id="tags" class='pull-left'> git, cherry-pick, diff </div> <a class='pull-right' href="#comments" rel="modal:open">è¯„è®º</a> </div> <div id="comments"> <!-- å¤šè¯´è¯„è®ºæ¡† start --> <div class="ds-thread" data-thread-key="/%E6%8A%80%E6%9C%AF/2017/06/05/cherry-pick-between-two-distant-branches.html" data-title="é¥è¿œåˆ†æ”¯çš„æ‰‹åŠ¨ cherry-pick æ–¹æ³•" data-url="http://wwulfric.github.io/%E6%8A%80%E6%9C%AF/2017/06/05/cherry-pick-between-two-distant-branches.html"></div> <!-- å¤šè¯´è¯„è®ºæ¡† end --> <!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) --> <script type="text/javascript"> var duoshuoQuery = {short_name:"storm-spirit"}; (function() { var ds = document.createElement('script'); ds.type = 'text/javascript';ds.async = true; ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js'; ds.charset = 'UTF-8'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds); })(); </script> <!-- å¤šè¯´å…¬å…±JSä»£ç  end --> </div> </div> <footer> <a class="page-link" href="/about/">wulfric</a> Â© 2013~2014. All rights reserved. </footer> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-54608037-1', 'auto'); ga('send', 'pageview'); </script> </div> </body> </html>
